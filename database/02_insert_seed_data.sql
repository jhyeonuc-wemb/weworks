-- ============================================
-- WEWORKS 시드 데이터 삽입
-- 실행 순서: 01_create_tables.sql 실행 후 실행
-- ============================================

-- ============================================
-- 0. 기본 데이터
-- ============================================

-- we_roles (역할)
INSERT INTO we_roles (name, description) VALUES
('admin', '시스템 관리자'),
('pm', '프로젝트 매니저'),
('developer', '개발자'),
('sales', '영업'),
('viewer', '조회 전용')
ON CONFLICT (name) DO NOTHING;

-- we_departments (부서)
INSERT INTO we_departments (name, description) VALUES
('개발팀', '소프트웨어 개발'),
('영업팀', '영업 및 마케팅'),
('기획팀', '기획 및 설계')
ON CONFLICT (name) DO NOTHING;

-- we_users (사용자) - 비밀번호는 임시로 'password' (실제 운영 시 해시화 필요)
INSERT INTO we_users (email, password_hash, name, employee_number, department_id, role_id, position, status) VALUES
('admin@weworks.com', '$2b$10$placeholder', '관리자', 'E001', NULL, (SELECT id FROM we_roles WHERE name = 'admin'), '시스템 관리자', 'active'),
('hong@weworks.com', '$2b$10$placeholder', '홍길동', 'E002', (SELECT id FROM we_departments WHERE name = '개발팀'), (SELECT id FROM we_roles WHERE name = 'pm'), 'PM', 'active'),
('kim@weworks.com', '$2b$10$placeholder', '김철수', 'E003', (SELECT id FROM we_departments WHERE name = '영업팀'), (SELECT id FROM we_roles WHERE name = 'sales'), '영업대표', 'active'),
('lee@weworks.com', '$2b$10$placeholder', '이영희', 'E004', (SELECT id FROM we_departments WHERE name = '개발팀'), (SELECT id FROM we_roles WHERE name = 'pm'), 'PM', 'active'),
('park@weworks.com', '$2b$10$placeholder', '박민수', 'E005', (SELECT id FROM we_departments WHERE name = '영업팀'), (SELECT id FROM we_roles WHERE name = 'sales'), '영업대표', 'active'),
('jung@weworks.com', '$2b$10$placeholder', '정수진', 'E006', (SELECT id FROM we_departments WHERE name = '개발팀'), (SELECT id FROM we_roles WHERE name = 'pm'), 'PM', 'active')
ON CONFLICT (email) DO NOTHING;

-- we_clients (고객사/발주처)
INSERT INTO we_clients (name, type, code, description) VALUES
('한국남동발전', 'customer', 'KOEN', '한국남동발전(주)'),
('한국전력기술', 'orderer', 'KEPCO_TECH', '한국전력기술(주)'),
('한국전력공사', 'customer', 'KEPCO', '한국전력공사'),
('한수원', 'orderer', 'KHNP', '한국수력원자력(주)')
ON CONFLICT (name) DO NOTHING;

-- ============================================
-- 1. 프로젝트 카테고리
-- ============================================
INSERT INTO we_project_categories (code, name, description, display_order) VALUES
('ENERGY', 'Energy', '에너지 관련 프로젝트', 10),
('ENVIRONMENT', 'Environment', '환경 관련 프로젝트', 20),
('SAFETY', 'Safety', '안전 관련 프로젝트', 30),
('DISASTER', 'Disaster', '재난 관련 프로젝트', 40),
('OTHER', '기타', '기타 분류 프로젝트', 999)
ON CONFLICT (code) DO NOTHING;

-- ============================================
-- 2. 인력구분 (M/D 산정용)
-- ============================================
INSERT INTO we_labor_categories (code, name, description, display_order) VALUES
('PM', 'PM', '프로젝트 매니저', 10),
('DEV', '개발', '소프트웨어 개발자', 20),
('DESIGN', '설계', '시스템/아키텍처 설계자', 30),
('IF', 'I/F', '인터페이스 개발자', 40),
('2DDESIGN', '2D디자인', '2D UI/UX 디자이너', 50),
('PORTAL', '포탈', '포탈 개발자', 60),
('QA', 'QA', '품질 보증', 70)
ON CONFLICT (code) DO NOTHING;

-- ============================================
-- 3. M/D 산정 난이도 항목 (공통)
-- ============================================
INSERT INTO we_md_difficulty_items (category, content, description, default_difficulty, display_order) VALUES
-- 요구사항
('요구사항', '요구사항 정의서 미제공', '구두/회의 중심 전달', 2, 1),
('요구사항', '요구사항 수시 변경 예상', '스펙 Freeze 어려움', 2, 2),
('요구사항', '고객의 IT 이해도 낮음', '기술적 소통 난이도 상승', 2, 3),
('요구사항', '고객 의사결정자 부재 또는 다수', '승인/결정 지연 가능성', 2, 4),
-- 화면, 기능
('화면, 기능', '화면 ≥ 20개', 'CRUD 중심 화면, 팝업포함', 3, 5),
('화면, 기능', '업무 기능 ≥ 5개 모듈로 나눠짐', '업무 도메인 분리가 뚜렷함', 1, 6),
('화면, 기능', '사용자 정의 기능 많음', '워크플로우, 조건부 입력 등', 3, 7),
('화면, 기능', '권한, 조직별 접근 제한 포함', 'Role-based UI 구성 필요', 2, 8),
('화면, 기능', '배치 프로세스 포함', '예약 실행, 로그처리 등 필요', 2, 9),
('화면, 기능', '반응형 지원', '반응형 지원 개발 필요', 3, 10),
('화면, 기능', 'UI/접근성', '모바일 지원 포함 (앱, 웹앱)', 3, 11),
-- 연계 및 외부 시스템
('연계 및 외부 시스템', '외부 시스템 연계 ≥ 5개', 'API, DB 연동 등', 1, 12),
('연계 및 외부 시스템', '실시간 연계 포함', 'Webhook, Event 등', 2, 13),
('연계 및 외부 시스템', '레거시 시스템 연계', '명세 미비, 파악 난이도 ↑', 2, 14),
('연계 및 외부 시스템', '인증/SSO 연동 포함', 'AD, OAuth 등', 3, 15),
-- 데이터 및 보고서
('데이터 및 보고서', '정형 보고서 ≥ 20건', 'PDF/Excel 출력 등', 1, 16),
('데이터 및 보고서', '대용량 데이터 처리', '100만건 이상', 2, 17),
('데이터 및 보고서', '마이그레이션 포함', '데이터 정제/이관', 0, 18),
('데이터 및 보고서', '정합성 검증 포함', '정확도 중요', 2, 19),
-- 기술 환경
('기술 환경', '클라우드 환경 구축', 'AWS, Azure 등', 3, 20),
('기술 환경', 'Hybrid 인프라', '온프 + 클라우드 병행', 0, 21),
('기술 환경', '신규 기술 도입', 'AI, IoT, GIS 등', 0, 22),
('기술 환경', '복잡한 DB (30테이블 이상)', '관계 정규화 + 성능 고려', 2, 23),
-- 보안 및 인증
('보안 및 인증', '사용자 권한 분기 3단계 이상', '화면별 권한 설정 필수', 2, 24),
('보안 및 인증', '데이터 암호화 필요', '전송/저장 모두 포함', 2, 25),
('보안 및 인증', '공공기관 보안규격 준수', 'ISMS, CC 등 인증 요건 있음', 3, 26),
-- 운영/인력관리
('운영/인력관리', '납기 ≤ 2개월', '기간 촉박', 0, 27),
('운영/인력관리', '프로젝트 기간 ≥ 12개월', '장기 인력 유지/교체 이슈', 3, 28),
('운영/인력관리', '병행 프로젝트 존재', '일정/자원 집중 어려움', 3, 29),
('운영/인력관리', '개발 서버 운영', '운영서버 직접 반영은 어려움', 1, 30),
('운영/인력관리', '고객 내부 승인 절차 복잡', '화면마다 승인 필요', 1, 31),
('운영/인력관리', '주 단위 납품 일정 요구', '세분화된 일정 관리 필요', 2, 32),
('운영/인력관리', '고객사 상주 필수', '피로도, 업무 밀도, 팀 운영 난이도 ↑', 2, 33),
('운영/인력관리', '상주 위치 원거리', '출장, 교통, 숙소 등 추가 리스크', 3, 34),
('운영/인력관리', '외주 인력과의 협업 필수', 'SI 협력사, 고객 IT팀, 프리랜서 등 협조 필요', 3, 35),
('운영/인력관리', '인력 교체 가능성 있음 (예: 6개월 계약)', '인수인계 등 중간 공백 위험 존재', 2, 36),
('운영/인력관리', '고객 내부 정치적 이슈 있음', '팀 변경 등 승인 구조 변경', 2, 37),
-- 감리
('감리', '감리 대상 프로젝트, 공공산출물', '일정금액 이상 또는 공공과제', 3, 38),
('감리', '단계별 감리 진행 (4단계 이상)', '분석/설계/개발/종료 감리', 3, 39),
('감리', '감리 전담 인력 부재', '기존 개발팀이 대응까지 담당', 3, 40)
ON CONFLICT (category, content) DO NOTHING;

-- ============================================
-- 4. M/D 산정 분야별 난이도 항목
-- ============================================
INSERT INTO we_md_field_difficulty_items (field_category, content, description, default_difficulty, display_order) VALUES
-- 대시보드
('대시보드', '사용자 컴포넌트 필요', '차트, 그래프, 맵, KPI 등', 0, 1),
('대시보드', '사용자 정의 필터 지원', '사용자 조건별 실시간 필터링', 0, 2),
('대시보드', '실시간 데이터 갱신 ≤ 5초', 'WebSocket, polling 등', 0, 3),
('대시보드', '데이터 적재량 ≥ 1M건 이상', '대용량 처리 및 성능 고려 필요', 0, 4),
('대시보드', '시각화 기준 사용자 피드백 빈도 높음', '빈번한 디자인 요구 변경', 0, 5),
('대시보드', 'Drill-down, Drill-through 지원', '다단계 KPI 분석 제공', 0, 6),
-- 디지털트윈
('디지털트윈', '실측 기반 센서 연동 필요', '온도, 진동, 전력 등 실시간 수집', 3, 7),
('디지털트윈', '장비 연동/제어 포함', 'IoT, PLC, DCS 등 장비 제어 기능 포함', 0, 8),
('디지털트윈', '실시간 좌표계 변환 필요', '좌표 정렬, 스케일링 등 포함', 1, 9),
('디지털트윈', '시뮬레이션 기능 요구', '시나리오 기반 상태 예측/분석', 3, 10),
('디지털트윈', '외부 물리엔진 연계 필요', 'Unity, Unreal, MATLAB 등 포함', 0, 11),
('디지털트윈', '애니메이션 구현', '효과, 애니메이션, 사운드 등 포함', 3, 12),
('디지털트윈', '공간정보 시스템 연계 필요', 'GIS, LBS 포함 시', 0, 13)
ON CONFLICT (field_category, content) DO NOTHING;

-- ============================================
-- 5. M/D 산정 개발 항목 기준표
-- ============================================
INSERT INTO we_md_development_items (classification, content, default_quantity, standard_md, display_order) VALUES
-- PM
('PM', 'PM/사업관리', 0, 0, 1),
-- 개발
('개발', '개발 환경 구축 (서버 설치 포함)', 0, 5, 2),
('개발', '운영 환경 구축', 0, 5, 3),
('개발', '공통 (로그인, 메뉴, 권한, 레이아웃 등)', 0, 10, 4),
('개발', '화면(컨텐츠 ≤ 5) 설계 (팝업 포함)', 0, 2, 5),
('개발', '화면(컨텐츠 ≥ 5) 설계 (팝업 포함)', 0, 3, 6),
('개발', '화면 개발(컨텐츠 ≤ 5) (팝업 포함)', 0, 2, 7),
('개발', '화면 개발(컨텐츠 ≥ 5) (팝업 포함)', 0, 3, 8),
('개발', '3D 애니메이션 (효과, 사운드)', 0, 3, 9),
('개발', 'SOP 관리', 0, 20, 10),
('개발', '설정/보고서/통계 등', 0, 3, 11),
('개발', '메타버스', 0, 10, 12),
-- I/F
('I/F', '연계시스템 (분석, 설계)', 0, 5, 13),
('I/F', 'TIM 워커 DB to DB 등 간단', 0, 1, 14),
('I/F', 'TIM 그 외 워커', 0, 2, 15),
('I/F', '제품 미사용 연계 개발', 0, 5, 16),
('I/F', 'TIM+ 워크플로우 간단', 0, 2, 17),
('I/F', 'TIM+ 워크플로우 복잡', 0, 3, 18),
('I/F', 'DB(테이블) 설계', 0, 0.5, 19),
-- 2D디자인
('2D디자인', '공통 컨셉 디자인', 0, 5, 20),
('2D디자인', '화면 디자인 (시안)', 0, 1, 21),
-- 포탈
('포탈', '개발 환경 구축 (서버 설치 포함)', 0, 5, 22),
('포탈', '운영 환경 구축', 0, 5, 23),
('포탈', '공통 (로그인, 메뉴, 권한, 레이아웃 등)', 0, 10, 24),
('포탈', '포탈 (보고서/통계/설정)', 0, 2, 25)
ON CONFLICT (classification, content) DO NOTHING;

-- ============================================
-- 6. M/D 산정 3D 모델링 가중치
-- ============================================
INSERT INTO we_md_modeling_3d_weights (content, description, weight, display_order) VALUES
('모델링 제공', '배치 등', 0.1, 1),
('CAD 도면 제공', 'DWG/IFC 등 정합성 양호', 1.0, 2),
('CAD 일부 + 사진 병행', '누락 도면 보완 필요', 1.15, 3),
('사진/실측 제공', '3D 모델링을 사진 기반 추정', 1.3, 4),
('실측 필요', '현장 실측 → 모델화', 1.5, 5)
ON CONFLICT (content) DO NOTHING;

-- ============================================
-- 7. M/D 산정 3D 모델링 기준표
-- ============================================
INSERT INTO we_md_modeling_3d_items (category, difficulty, default_quantity, base_md, remarks, display_order) VALUES
-- 부지
('부지', '', 1, 1, '대형 복합건물, 곡면/비정형 파사드', 1),
-- 건물
('건물', '상', 1, 1, '대형 복합건물, 곡면/비정형 파사드', 2),
('건물', '중', 30, 0.5, '중고층 건물, 입면 구성 다양', 3),
('건물', '하', 0.3, 0, '단층 건물, 구성요소 적음, 대칭구조', 4),
-- 층
('층', '상', 0.5, 0, '바닥 단차, 복잡 평면 구조', 5),
('층', '중', 100, 0.3, '다소 복잡한 평면 구조', 6),
('층', '하', 0.2, 0, '단순한 평면구조', 7),
-- 설비/장비
('설비/장비', '상', 2, 0, '중대형 설비, 배관등 구조 복잡(보일러, 터빈 등)', 8),
('설비/장비', '중', 1000, 0.5, '중형 설비', 9),
('설비/장비', '하', 0.2, 0, '박스 형태, 디테일 적음', 10),
('설비/장비', '중복', 300, 0.1, '중복 사용 (배치 필요)', 11),
-- 캐릭터
('캐릭터', '', 2, 5, '메타버스', 12)
ON CONFLICT (category, difficulty) DO NOTHING;

-- ============================================
-- 8. M/D 산정 P&ID 가중치
-- ============================================
INSERT INTO we_md_pid_weights (content, description, weight, display_order) VALUES
('수기 작성', '배경을 따라서 수기로 작성', 1.0, 1),
('DrawDX', '자동 인식 후 결과 보정', 0.15, 2),
('MS Visio', 'Visio 인식 (지원 예정)', 0.1, 3)
ON CONFLICT (content) DO NOTHING;

-- ============================================
-- 9. M/D 산정 P&ID 기준표
-- ============================================
INSERT INTO we_md_pid_items (category, default_quantity, base_md, remarks, display_order) VALUES
('P&ID', 500, 1, '', 1),
('SLD', 0, 0.5, '', 2)
ON CONFLICT (category) DO NOTHING;
